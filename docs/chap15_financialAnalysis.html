<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="ja" xml:lang="ja"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.529">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<title>R for Empirical Accounting Research - 16&nbsp; 財務分析</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>

<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./part04.html" rel="prev">
<link href="./img/favicon.ico" rel="icon">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light"><script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "一致なし",
    "search-matching-documents-text": "一致した文書",
    "search-copy-link-title": "検索へのリンクをコピー",
    "search-hide-matches-text": "追加の検索結果を非表示",
    "search-more-match-text": "追加の検索結果",
    "search-more-matches-text": "追加の検索結果",
    "search-clear-button-title": "消去",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "取消",
    "search-submit-button-title": "検索",
    "search-label": "サーチ"
  }
}</script><script>window.backupDefine = window.define; window.define = undefined;</script><script src="https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.js"></script><script>document.addEventListener("DOMContentLoaded", function () {
 var mathElements = document.getElementsByClassName("math");
 var macros = [];
 for (var i = 0; i < mathElements.length; i++) {
  var texText = mathElements[i].firstChild;
  if (mathElements[i].tagName == "SPAN") {
   katex.render(texText.data, mathElements[i], {
    displayMode: mathElements[i].classList.contains('display'),
    throwOnError: false,
    macros: macros,
    fleqn: false
   });
}}});
  </script><script>window.define = window.backupDefine; window.backupDefine = undefined;</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.css">
<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>
</head>
<body class="nav-sidebar floating slimcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="quarto-secondary-nav"><div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="サイドバーを切り替える" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./part04.html">第4部 財務分析</a></li><li class="breadcrumb-item"><a href="./chap15_financialAnalysis.html"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">財務分析</span></a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="サイドバーを切り替える" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto"><div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">R for Empirical Accounting Research</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="サーチ"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Rによる実証会計入門</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./part01.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">第1部 R言語の基礎</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="セクションを切り替え">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chap02_prepare.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">準備</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chap03_code.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">コード作成の作法</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chap04_R.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Rの基礎</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chap04_dataframe.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">データフレーム</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chap05_packages.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">パッケージ</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chap06_function.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">関数</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chap07_pipe.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">パイプ演算子</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chap08_tidydata.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">整然データ</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chap08_needs.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">日経NEEDSデータの処理</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./part02.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">第2部 前処理と記述統計量</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="セクションを切り替え">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chap09_merge.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">データの結合</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chap09_handling.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">データハンドリング</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./part03.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">第3部 データの可視化</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true" aria-label="セクションを切り替え">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chap11_visualization.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">ggplot2で可視化</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chap12_ggpubr.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">ggpubrで可視化</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chap13_gg_function.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">ggplotを関数に埋め込む</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chap14_ggplot_ghibli.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">ggplotとジブリ</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./part04.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">第4部 財務分析</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true" aria-label="セクションを切り替え">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chap15_financialAnalysis.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">財務分析</span></span></a>
  </div>
</li>
      </ul>
</li>
    </ul>
</div>
</nav><div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">目次</h2>
   
  <ul>
<li><a href="#%E3%83%87%E3%83%BC%E3%82%BF%E3%81%AE%E8%AA%AD%E3%81%BF%E8%BE%BC%E3%81%BF%E3%81%A8%E5%89%8D%E5%87%A6%E7%90%86" id="toc-データの読み込みと前処理" class="nav-link active" data-scroll-target="#%E3%83%87%E3%83%BC%E3%82%BF%E3%81%AE%E8%AA%AD%E3%81%BF%E8%BE%BC%E3%81%BF%E3%81%A8%E5%89%8D%E5%87%A6%E7%90%86"><span class="header-section-number">16.0.1</span> データの読み込みと前処理</a></li>
  <li>
<a href="#%E7%94%9F%E7%94%A3%E6%80%A7%E3%81%AE%E5%88%86%E6%9E%90" id="toc-生産性の分析" class="nav-link" data-scroll-target="#%E7%94%9F%E7%94%A3%E6%80%A7%E3%81%AE%E5%88%86%E6%9E%90"><span class="header-section-number">16.1</span> 生産性の分析</a>
  <ul class="collapse">
<li><a href="#%E4%BB%98%E5%8A%A0%E4%BE%A1%E5%80%A4%E3%81%A8%E3%81%9D%E3%81%AE%E6%B8%AC%E5%AE%9A" id="toc-付加価値とその測定" class="nav-link" data-scroll-target="#%E4%BB%98%E5%8A%A0%E4%BE%A1%E5%80%A4%E3%81%A8%E3%81%9D%E3%81%AE%E6%B8%AC%E5%AE%9A"><span class="header-section-number">16.1.1</span> 付加価値とその測定</a></li>
  <li><a href="#%E4%BB%98%E5%8A%A0%E4%BE%A1%E5%80%A4%E3%81%AE%E6%B8%AC%E5%AE%9A" id="toc-付加価値の測定" class="nav-link" data-scroll-target="#%E4%BB%98%E5%8A%A0%E4%BE%A1%E5%80%A4%E3%81%AE%E6%B8%AC%E5%AE%9A"><span class="header-section-number">16.1.2</span> 付加価値の測定</a></li>
  <li><a href="#%E5%8A%B4%E5%83%8D%E7%94%9F%E7%94%A3%E6%80%A7%E3%81%AE%E5%88%86%E6%9E%90" id="toc-労働生産性の分析" class="nav-link" data-scroll-target="#%E5%8A%B4%E5%83%8D%E7%94%9F%E7%94%A3%E6%80%A7%E3%81%AE%E5%88%86%E6%9E%90"><span class="header-section-number">16.1.3</span> 労働生産性の分析</a></li>
  <li><a href="#%E5%8A%B4%E5%83%8D%E7%94%9F%E7%94%A3%E6%80%A7%E3%81%AE%E5%88%86%E8%A7%A3" id="toc-労働生産性の分解" class="nav-link" data-scroll-target="#%E5%8A%B4%E5%83%8D%E7%94%9F%E7%94%A3%E6%80%A7%E3%81%AE%E5%88%86%E8%A7%A3"><span class="header-section-number">16.1.4</span> 労働生産性の分解</a></li>
  </ul>
</li>
  <li>
<a href="#%E4%BB%98%E5%8A%A0%E4%BE%A1%E5%80%A4%E3%81%AE%E5%88%86%E9%85%8D" id="toc-付加価値の分配" class="nav-link" data-scroll-target="#%E4%BB%98%E5%8A%A0%E4%BE%A1%E5%80%A4%E3%81%AE%E5%88%86%E9%85%8D"><span class="header-section-number">16.2</span> 3. 付加価値の分配</a>
  <ul class="collapse">
<li><a href="#%E5%AE%9A%E7%BE%A9%E3%82%92%E8%A6%9A%E3%81%88%E3%82%8B" id="toc-定義を覚える" class="nav-link" data-scroll-target="#%E5%AE%9A%E7%BE%A9%E3%82%92%E8%A6%9A%E3%81%88%E3%82%8B"><span class="header-section-number">16.2.1</span> 定義を覚える。</a></li>
  <li><a href="#%E9%96%A2%E4%BF%82%E3%82%92%E8%A6%9A%E3%81%88%E3%82%8B" id="toc-関係を覚える" class="nav-link" data-scroll-target="#%E9%96%A2%E4%BF%82%E3%82%92%E8%A6%9A%E3%81%88%E3%82%8B"><span class="header-section-number">16.2.2</span> 関係を覚える</a></li>
  </ul>
</li>
  <li>
<a href="#%E4%B8%8D%E7%A2%BA%E5%AE%9F%E6%80%A7%E3%81%AE%E5%88%86%E6%9E%90" id="toc-不確実性の分析" class="nav-link" data-scroll-target="#%E4%B8%8D%E7%A2%BA%E5%AE%9F%E6%80%A7%E3%81%AE%E5%88%86%E6%9E%90"><span class="header-section-number">16.3</span> 不確実性の分析</a>
  <ul class="collapse">
<li><a href="#%E8%B2%BB%E7%94%A8%E6%A7%8B%E9%80%A0%E3%81%8C%E5%88%A9%E7%9B%8A%E5%A4%89%E5%8B%95%E3%81%AB%E5%8F%8A%E3%81%BC%E3%81%99%E5%BD%B1%E9%9F%BF" id="toc-費用構造が利益変動に及ぼす影響" class="nav-link" data-scroll-target="#%E8%B2%BB%E7%94%A8%E6%A7%8B%E9%80%A0%E3%81%8C%E5%88%A9%E7%9B%8A%E5%A4%89%E5%8B%95%E3%81%AB%E5%8F%8A%E3%81%BC%E3%81%99%E5%BD%B1%E9%9F%BF"><span class="header-section-number">16.3.1</span> 費用構造が利益変動に及ぼす影響</a></li>
  <li><a href="#%E7%B7%8F%E8%B2%BB%E7%94%A8%E6%B3%95" id="toc-総費用法" class="nav-link" data-scroll-target="#%E7%B7%8F%E8%B2%BB%E7%94%A8%E6%B3%95"><span class="header-section-number">16.3.2</span> 総費用法</a></li>
  <li><a href="#%E6%9C%80%E5%B0%8F%E4%BA%8C%E4%B9%97%E6%B3%95" id="toc-最小二乗法" class="nav-link" data-scroll-target="#%E6%9C%80%E5%B0%8F%E4%BA%8C%E4%B9%97%E6%B3%95"><span class="header-section-number">16.3.3</span> 最小二乗法</a></li>
  <li><a href="#%E8%B2%BB%E7%9B%AE%E5%88%A5%E6%B3%95" id="toc-費目別法" class="nav-link" data-scroll-target="#%E8%B2%BB%E7%9B%AE%E5%88%A5%E6%B3%95"><span class="header-section-number">16.3.4</span> 費目別法</a></li>
  <li><a href="#%E6%90%8D%E7%9B%8A%E5%88%86%E5%B2%90%E7%82%B9%E6%AF%94%E7%8E%87%E3%81%A8%E5%96%B6%E6%A5%AD%E3%83%AC%E3%83%90%E3%83%AC%E3%83%83%E3%82%B8" id="toc-損益分岐点比率と営業レバレッジ" class="nav-link" data-scroll-target="#%E6%90%8D%E7%9B%8A%E5%88%86%E5%B2%90%E7%82%B9%E6%AF%94%E7%8E%87%E3%81%A8%E5%96%B6%E6%A5%AD%E3%83%AC%E3%83%90%E3%83%AC%E3%83%83%E3%82%B8"><span class="header-section-number">16.3.5</span> 損益分岐点比率と営業レバレッジ</a></li>
  </ul>
</li>
  </ul></nav>
    </div>
<!-- main -->
<main class="content page-columns page-full" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./part04.html">第4部 財務分析</a></li><li class="breadcrumb-item"><a href="./chap15_financialAnalysis.html"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">財務分析</span></a></li></ol></nav><div class="quarto-title">
<h1 class="title">
<span class="chapter-number">16</span>&nbsp; <span class="chapter-title">財務分析</span>
</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header><p>この章では、よく財務分析の教科書に登場する財務比率(financial ratio)の使い方や計算方法について説明します。 財務比率は、企業の財務状態を把握するための指標であり、企業の経営者や投資家、債権者、株主などが企業の財務状態を判断するために利用します。</p>
<p>財務比率を計算して、作図や作表するまでのプロセスはざっくり以下の通りです。</p>
<ol type="1">
<li>
<code>read_csv()</code>でデータを読み込む。</li>
<li>
<code><a href="https://dplyr.tidyverse.org/reference/rename.html">dplyr::rename()</a></code>で変数名を変更する。</li>
<li>
<code><a href="https://rdrr.io/r/utils/str.html">str()</a></code>で変数の型を確認し、カテゴリー変数を<code><a href="https://rdrr.io/r/base/factor.html">factor()</a></code>とか<code><a href="https://rdrr.io/r/base/factor.html">as.factor()</a></code>で因子型に変換する。</li>
<li>欠損値にゼロを代入するか、その行を除去するかの方針を定めて、<code><a href="https://dplyr.tidyverse.org/reference/filter.html">dplyr::filter()</a></code>でデータを抽出したり、<code>dplyr::drop_na()</code>で欠損値を除去したりする。</li>
<li>欠損値のないデータセットができたら、<code><a href="https://dplyr.tidyverse.org/reference/group_by.html">dplyr::group_by()</a></code>と一緒に<code><a href="https://dplyr.tidyverse.org/reference/summarise.html">dplyr::summarise()</a></code>や<code><a href="https://dplyr.tidyverse.org/reference/mutate.html">dplyr::mutate()</a></code>を使って財務比率を計算する。</li>
<li>計算した財務比率を<code>ggplot2</code>で作図したり、<code>kableExtra</code>で表を作成する。</li>
</ol>
<p>財務比率は、企業の財務諸表項目の分数で表されるため、<code>group_by()</code>関数や<code>mutate()</code>関数を使うことで計算していきます。</p>
<p>必要なパッケージを読み込んでおきます。</p>
<p>この章で分析対象とする企業は，</p>
<ul>
<li>2010年度から2023年度までに期間に，</li>
<li>東京証券取引所のプライム・スタンダード・グロース市場に上場し，</li>
<li>従業員数が500名以上いる企業</li>
</ul>
<p>とします。 この章で用いる会計項目は，</p>
<ul>
<li>
<code>R001</code> 決算月数</li>
<li>
<code>R018</code> 上場場部：コード</li>
<li>
<code>R022</code> 日経業種：コード</li>
<li>
<code>B063</code> 有形固定資産</li>
<li>
<code>B110</code> 資産合計</li>
<li>
<code>D021</code> 売上高・営業収益</li>
<li>
<code>D101</code> 法人税等</li>
<li>
<code>D103</code> 法人税等調整額</li>
<li>
<code>D047</code> 支払利息・割引料</li>
<li>
<code>D110</code> 親会社株主に帰属する当期純利益</li>
<li>
<code>K075</code> [販管費] 人件費・福利厚生費</li>
<li>
<code>K079</code> [販管費] 賃借料</li>
<li>
<code>H021</code> 期末従業員数</li>
</ul>
<p>です。 日経NEEDS社会科学情報検索システムでデータを集めるときは，以下の項目コードを使ってください。</p>
<pre><code>R001,R018,R022,B063,B110,D021,D101,D103,D047,D110,K075,K079,H021</code></pre>
<section id="データの読み込みと前処理" class="level3 page-columns page-full" data-number="16.0.1"><h3 data-number="16.0.1" class="anchored" data-anchor-id="データの読み込みと前処理">
<span class="header-section-number">16.0.1</span> データの読み込みと前処理</h3>
<p>まずは分析するためのデータを読み込みます。 <code><a href="https://rdrr.io/r/base/getwd.html">getwd()</a></code>や<code><a href="https://rdrr.io/r/base/getwd.html">setwd()</a></code>を使って、CSVファイルが入っているフォルダが作業ディレクトリ(working directory)になっているかどうか確認・設定しておきましょう。</p>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
注意
</div>
</div>
<div class="callout-body-container callout-body">
<p>日経NEEDS社会科学情報検索システムからダウンロードしたデータは，文字コードがShift-JISであるため，UTF-8を基本とするMacだと<code>read_csv</code>関数でそのまま読み込むと文字化けします。 そのため，<code>read_csv</code>関数の<code>locale</code>引数で<code>locale(encoding = "Shift_JIS")</code>を指定して読み込む必要があります。 <code>Shift_JIS</code>のところは，<code>cp932</code>や<code>sjis</code>でも大丈夫です。</p>
</div>
</div>
<div class="cell">
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu">read_csv</span><span class="op">(</span><span class="st">"data/TSE_2010_EMP500.csv"</span><span class="op">)</span></span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 27174 Columns: 18
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr  (3): 日経会社コード, 企業名称, 決算期
dbl (15): 決算種別, 連結基準, 期末従業員数, 決算月数, 上場場部：コード, 日経業種：コード, 資産合計, 有形固定資産, 【販管費】人...

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
</div>

<div class="no-row-height column-margin column-container"><div class="">
<p><code>read_csv</code>関数でデータを読み込むと， “Use <code>spec()</code> to retrieve the full column specification for this data.” “Specify the column types or set <code>show_col_types = FALSE</code> to quiet this message.” というメッセージが出ます。 読み込んだデータの完全な仕様(specification)をみたいなら<code>spec()</code>関数を使ってね。このメッセージを消したいなら，列のタイプを指定するか，<code>show_col_types = FALSE</code>を指定してね。ということです。無視して大丈夫です。</p>
</div></div><p>日経NEEDSからダウンロードしたデータの変数名は、<code>親会社株主に帰属する当期純利益（連結）／当期利益（単独）［累計］</code>のように長いものがあるので， 分析しやすいように分かりやすい変数名に変更します。 変数名は半角英数の単語をアンダーバーでつなげたスネークケース(snake case)で書くことが推奨されます。</p>

<div class="no-row-height column-margin column-container"><div class="">
<p>たとえば，<code>total_asset</code>や<code>num_employee</code>のように，変数名から中身が想像できる名前にすることが望ましいです。 一時的につかう変数であれば，<code>x</code>とか<code>g</code>でもよいですが，分析結果を他の人に見せるときは，分かりやすい変数名に変更することが望ましいです。 データフレームなら，<code>df_hoge</code>，テーブルなら<code>tbl_hoge</code>，行列なら<code>mat_hoge</code>など，変数名の先頭にデータ型を示す接頭辞をつけておくことも推奨されます。</p>
</div></div><div class="cell">
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># renameで変数名を変更</span></span>
<span><span class="va">df</span> <span class="op">&lt;-</span> <span class="va">df</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">rename</span><span class="op">(</span></span>
<span>    nikkei_code <span class="op">=</span> <span class="st">"日経会社コード"</span>,</span>
<span>    name <span class="op">=</span> <span class="st">"企業名称"</span>,</span>
<span>    date <span class="op">=</span> <span class="st">"決算期"</span>,</span>
<span>    kessan <span class="op">=</span> <span class="st">"決算種別"</span>,</span>
<span>    renketsu <span class="op">=</span> <span class="st">"連結基準"</span>,</span>
<span>    num_employee <span class="op">=</span> <span class="st">"期末従業員数"</span>,</span>
<span>    kessan_month <span class="op">=</span> <span class="st">"決算月数"</span>,</span>
<span>    listed_code <span class="op">=</span> <span class="st">"上場場部：コード"</span>,</span>
<span>    industry_code <span class="op">=</span> <span class="st">"日経業種：コード"</span>,</span>
<span>    total_asset <span class="op">=</span> <span class="st">"資産合計"</span>,</span>
<span>    tangibles <span class="op">=</span>  <span class="st">"有形固定資産"</span>,</span>
<span>    salary <span class="op">=</span>  <span class="st">"【販管費】人件費・福利厚生費［累計］"</span>,</span>
<span>    rent_fee <span class="op">=</span> <span class="st">"【販管費】賃借料［累計］"</span>,</span>
<span>    corporate_tax <span class="op">=</span> <span class="st">"法人税等［累計］"</span>,</span>
<span>    tax_adjustment <span class="op">=</span> <span class="st">"法人税等調整額／繰延税金費用［累計］"</span>,</span>
<span>    net_income <span class="op">=</span>   <span class="st">"親会社株主に帰属する当期純利益（連結）／当期利益（単独）［累計］"</span>,</span>
<span>    interest_expense <span class="op">=</span> <span class="st">"支払利息・割引料［累計］"</span>,</span>
<span>    sales <span class="op">=</span> <span class="st">"売上高・営業収益［累計］"</span></span>
<span>  <span class="op">)</span></span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>データが読み込めたら、まずは<code><a href="https://rdrr.io/r/utils/head.html">head()</a></code>関数や<code><a href="https://rdrr.io/r/base/summary.html">summary()</a></code>関数でデータの中身を確認します。</p>
<div class="cell">
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span></span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table" style="margin-left: auto; margin-right: auto;">
<thead><tr>
<th style="text-align:left;">
nikkei_code
</th>
<th style="text-align:left;">
name
</th>
<th style="text-align:left;">
date
</th>
<th style="text-align:right;">
kessan
</th>
<th style="text-align:right;">
renketsu
</th>
<th style="text-align:right;">
num_employee
</th>
<th style="text-align:right;">
kessan_month
</th>
<th style="text-align:right;">
listed_code
</th>
<th style="text-align:right;">
industry_code
</th>
<th style="text-align:right;">
total_asset
</th>
<th style="text-align:right;">
tangibles
</th>
<th style="text-align:right;">
salary
</th>
<th style="text-align:right;">
rent_fee
</th>
<th style="text-align:right;">
corporate_tax
</th>
<th style="text-align:right;">
tax_adjustment
</th>
<th style="text-align:right;">
net_income
</th>
<th style="text-align:right;">
interest_expense
</th>
<th style="text-align:right;">
sales
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
0000001
</td>
<td style="text-align:left;">
極洋
</td>
<td style="text-align:left;">
2010/03
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2909
</td>
<td style="text-align:right;">
12
</td>
<td style="text-align:right;">
11
</td>
<td style="text-align:right;">
235341
</td>
<td style="text-align:right;">
64301
</td>
<td style="text-align:right;">
11568
</td>
<td style="text-align:right;">
3955
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
923
</td>
<td style="text-align:right;">
-281
</td>
<td style="text-align:right;">
1086
</td>
<td style="text-align:right;">
364
</td>
<td style="text-align:right;">
145778
</td>
</tr>
<tr>
<td style="text-align:left;">
0000001
</td>
<td style="text-align:left;">
極洋
</td>
<td style="text-align:left;">
2011/03
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2753
</td>
<td style="text-align:right;">
12
</td>
<td style="text-align:right;">
11
</td>
<td style="text-align:right;">
235341
</td>
<td style="text-align:right;">
76925
</td>
<td style="text-align:right;">
12331
</td>
<td style="text-align:right;">
4261
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
799
</td>
<td style="text-align:right;">
-396
</td>
<td style="text-align:right;">
58
</td>
<td style="text-align:right;">
380
</td>
<td style="text-align:right;">
162731
</td>
</tr>
<tr>
<td style="text-align:left;">
0000001
</td>
<td style="text-align:left;">
極洋
</td>
<td style="text-align:left;">
2012/03
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2460
</td>
<td style="text-align:right;">
12
</td>
<td style="text-align:right;">
11
</td>
<td style="text-align:right;">
235341
</td>
<td style="text-align:right;">
84937
</td>
<td style="text-align:right;">
11574
</td>
<td style="text-align:right;">
4476
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
1383
</td>
<td style="text-align:right;">
-62
</td>
<td style="text-align:right;">
423
</td>
<td style="text-align:right;">
419
</td>
<td style="text-align:right;">
181885
</td>
</tr>
<tr>
<td style="text-align:left;">
0000001
</td>
<td style="text-align:left;">
極洋
</td>
<td style="text-align:left;">
2013/03
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2397
</td>
<td style="text-align:right;">
12
</td>
<td style="text-align:right;">
11
</td>
<td style="text-align:right;">
235341
</td>
<td style="text-align:right;">
83245
</td>
<td style="text-align:right;">
11281
</td>
<td style="text-align:right;">
4571
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
1139
</td>
<td style="text-align:right;">
-441
</td>
<td style="text-align:right;">
1269
</td>
<td style="text-align:right;">
376
</td>
<td style="text-align:right;">
178046
</td>
</tr>
<tr>
<td style="text-align:left;">
0000001
</td>
<td style="text-align:left;">
極洋
</td>
<td style="text-align:left;">
2014/03
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2111
</td>
<td style="text-align:right;">
12
</td>
<td style="text-align:right;">
11
</td>
<td style="text-align:right;">
235341
</td>
<td style="text-align:right;">
84319
</td>
<td style="text-align:right;">
10597
</td>
<td style="text-align:right;">
4466
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
1255
</td>
<td style="text-align:right;">
284
</td>
<td style="text-align:right;">
2968
</td>
<td style="text-align:right;">
385
</td>
<td style="text-align:right;">
202387
</td>
</tr>
<tr>
<td style="text-align:left;">
0000001
</td>
<td style="text-align:left;">
極洋
</td>
<td style="text-align:left;">
2015/03
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2169
</td>
<td style="text-align:right;">
12
</td>
<td style="text-align:right;">
11
</td>
<td style="text-align:right;">
235341
</td>
<td style="text-align:right;">
88937
</td>
<td style="text-align:right;">
12241
</td>
<td style="text-align:right;">
4628
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
2389
</td>
<td style="text-align:right;">
1216
</td>
<td style="text-align:right;">
2433
</td>
<td style="text-align:right;">
408
</td>
<td style="text-align:right;">
218350
</td>
</tr>
</tbody>
</table>
</div>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span></span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> nikkei_code            name               date               kessan  
 Length:27174       Length:27174       Length:27174       Min.   :10  
 Class :character   Class :character   Class :character   1st Qu.:10  
 Mode  :character   Mode  :character   Mode  :character   Median :10  
                                                          Mean   :10  
                                                          3rd Qu.:10  
                                                          Max.   :10  
                                                                      
    renketsu      num_employee     kessan_month    listed_code   
 Min.   :0.000   Min.   :     0   Min.   : 1.00   Min.   :11.00  
 1st Qu.:1.000   1st Qu.:   795   1st Qu.:12.00   1st Qu.:11.00  
 Median :1.000   Median :  1614   Median :12.00   Median :11.00  
 Mean   :1.083   Mean   :  7229   Mean   :11.98   Mean   :11.28  
 3rd Qu.:1.000   3rd Qu.:  4689   3rd Qu.:12.00   3rd Qu.:12.00  
 Max.   :3.000   Max.   :384586   Max.   :16.00   Max.   :13.00  
                 NA's   :4                                       
 industry_code     total_asset          tangibles            salary       
 Min.   :101001   Min.   :       71   Min.   :       1   Min.   :      1  
 1st Qu.:121204   1st Qu.:    27800   1st Qu.:    5695   1st Qu.:   1719  
 Median :241402   Median :    67269   Median :   16666   Median :   3948  
 Mean   :188818   Mean   :   576964   Mean   :  133755   Mean   :  15426  
 3rd Qu.:257561   3rd Qu.:   206024   3rd Qu.:   57395   3rd Qu.:  11074  
 Max.   :271704   Max.   :303846980   Max.   :13032389   Max.   :1316554  
                  NA's   :3           NA's   :18         NA's   :862      
    rent_fee      corporate_tax     tax_adjustment         net_income      
 Min.   :     1   Min.   :-853182   Min.   :-1120216.0   Min.   :-2008074  
 1st Qu.:   318   1st Qu.:    376   1st Qu.:    -154.0   1st Qu.:     560  
 Median :  1058   Median :   1135   Median :      -5.0   Median :    1984  
 Mean   :  5787   Mean   :   6800   Mean   :     -37.7   Mean   :   13123  
 3rd Qu.:  4270   3rd Qu.:   3657   3rd Qu.:     146.0   3rd Qu.:    6853  
 Max.   :444569   Max.   :1303168   Max.   : 1097414.0   Max.   : 4987962  
 NA's   :18853    NA's   :25        NA's   :420          NA's   :6         
 interest_expense     sales         
 Min.   :    -6   Min.   :       3  
 1st Qu.:    30   1st Qu.:   27268  
 Median :   112   Median :   67179  
 Mean   :  1563   Mean   :  330903  
 3rd Qu.:   457   3rd Qu.:  206892  
 Max.   :555902   Max.   :37154298  
 NA's   :1989     NA's   :11        </code></pre>
</div>
</div>
<p><code><a href="https://rdrr.io/r/base/summary.html">summary()</a></code>の出力を見ると，各変数の記述統計量と欠損値<code>NA</code>の個数が表示されています。 賃借料<code>rent_fee</code>と支払利息<code>interest_expense</code>の欠損値が比較的多いように見えますが，これは企業が支払っている賃借料や支払利息が小さく，損益計算書に記載されていないだけなので，ここではゼロを代入するようにします。</p>

<div class="no-row-height column-margin column-container"><div class="">
<p>(連結)財務諸表では，金額の小さな項目を「その他」にまとめて記載するため，金額が小さい個別の項目はデータ上欠損値になりますが，欠損しているわけではなく，金額が小さいだけなので，ここではゼロを代入しています。</p>
</div></div><p><code>NA</code>にゼロを代入するには，<code><a href="https://rdrr.io/r/base/NA.html">is.na()</a></code>関数を使います。 <code><a href="https://rdrr.io/r/base/NA.html">is.na()</a></code>関数は<code>NA</code>に<code>TRUE</code>を返す関数で，これをつかって<code>TRUE</code>となる値にゼロを代入する処理を行います。</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-2-contents" aria-controls="callout-2" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
欠損値にゼロを入れる
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-2" class="callout-2-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>たとえば，次のようなベクトル<code>x</code>に<code>NA</code>が含まれているかどうかを調べてみます。</p>
<div class="cell">
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span>,<span class="cn">NA</span>,<span class="fl">4</span>,<span class="fl">5</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE FALSE  TRUE FALSE FALSE</code></pre>
</div>
</div>
<p>すると，<code>FALSE FALSE TRUE FALSE FALSE</code>と表示され，3番目の要素が<code>NA</code>であることが分かります。ここに3を代入するには，次のようにします。</p>
<div class="cell">
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">x</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">3</span></span>
<span><span class="va">x</span></span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 2 3 4 5</code></pre>
</div>
</div>
<p><code>x[is.na(x)]</code>とすると，<code>x</code>の中で<code>NA</code>の要素を取り出すことができ，そこに3を代入しています。</p>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">df</span><span class="op">$</span><span class="va">rent_fee</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">df</span><span class="op">$</span><span class="va">rent_fee</span><span class="op">)</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">0</span></span>
<span><span class="va">df</span><span class="op">$</span><span class="va">interest_expense</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">df</span><span class="op">$</span><span class="va">interest_expense</span><span class="op">)</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">0</span></span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>それ以外にも欠損値をもつ項目はありますが，売上高や当期純利益が欠損値となっているのは異常なので，そういった行は後で<code><a href="https://rdrr.io/r/stats/filter.html">filter()</a></code>関数で除外します。 データの構造を<code>glimpse()</code>関数で再確認します。</p>
<div class="cell">
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">glimpse</span><span class="op">(</span><span class="va">df</span><span class="op">)</span></span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 27,174
Columns: 18
$ nikkei_code      &lt;chr&gt; "0000001", "0000001", "0000001", "0000001", "0000001"…
$ name             &lt;chr&gt; "極洋", "極洋", "極洋", "極洋", "極洋", "極洋", "極洋…
$ date             &lt;chr&gt; "2010/03", "2011/03", "2012/03", "2013/03", "2014/03"…
$ kessan           &lt;dbl&gt; 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 1…
$ renketsu         &lt;dbl&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,…
$ num_employee     &lt;dbl&gt; 2909, 2753, 2460, 2397, 2111, 2169, 2249, 2193, 2257,…
$ kessan_month     &lt;dbl&gt; 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 1…
$ listed_code      &lt;dbl&gt; 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 1…
$ industry_code    &lt;dbl&gt; 235341, 235341, 235341, 235341, 235341, 235341, 23534…
$ total_asset      &lt;dbl&gt; 64301, 76925, 84937, 83245, 84319, 88937, 94608, 9739…
$ tangibles        &lt;dbl&gt; 11568, 12331, 11574, 11281, 10597, 12241, 16972, 1713…
$ salary           &lt;dbl&gt; 3955, 4261, 4476, 4571, 4466, 4628, 4704, 4926, 5089,…
$ rent_fee         &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2508, 2669,…
$ corporate_tax    &lt;dbl&gt; 923, 799, 1383, 1139, 1255, 2389, 804, 1518, 1416, 12…
$ tax_adjustment   &lt;dbl&gt; -281, -396, -62, -441, 284, 1216, -235, 58, -58, 251,…
$ net_income       &lt;dbl&gt; 1086, 58, 423, 1269, 2968, 2433, 1799, 2422, 3211, 29…
$ interest_expense &lt;dbl&gt; 364, 380, 419, 376, 385, 408, 437, 418, 433, 443, 446…
$ sales            &lt;dbl&gt; 145778, 162731, 181885, 178046, 202387, 218350, 22662…</code></pre>
</div>
</div>
<p>日経コード<code>nikkei_code</code>と企業名称<code>name</code>、決算期<code>date</code>の３つは文字列<code>&lt;chr&gt;</code>で、それ以外の変数は数値<code>&lt;dbl&gt;</code>となっています。 しかし、実際は、<code>kessan</code>、<code>renketsu</code>、<code>listed_code</code>、<code>industry_code</code>はカテゴリカルデータであるため、<code>factor</code>型に変換します。</p>
<div class="cell">
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="va">df</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span></span>
<span>    kessan <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">as.factor</a></span><span class="op">(</span><span class="va">kessan</span><span class="op">)</span>,</span>
<span>    renketsu <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">as.factor</a></span><span class="op">(</span><span class="va">renketsu</span><span class="op">)</span>,</span>
<span>    listed_code <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">as.factor</a></span><span class="op">(</span><span class="va">listed_code</span><span class="op">)</span>,</span>
<span>    industry_code <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">as.factor</a></span><span class="op">(</span><span class="va">industry_code</span><span class="op">)</span> <span class="co"># ファクター</span></span>
<span>  <span class="op">)</span></span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>また財務比率は<strong>分数</strong>で計算されるため、分母がゼロあるいはゼロに近い値をもつと、計算ができなかったり、異常に大きい値が出てきたりします。 そのため、分母となる変数にゼロが含まないようにし、また異常値を除外します。 実証研究では、連続変数に対して上下1%以上の異常値を除外することが多いです。</p>
<div class="cell">
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="va">df</span> <span class="op">|&gt;</span> <span class="co"># 売上高、有形固定資産、従業員数が0の企業を除外</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">sales</span> <span class="op">&gt;</span> <span class="fl">0</span> <span class="op">&amp;</span> <span class="va">tangibles</span> <span class="op">&gt;</span> <span class="fl">0</span> <span class="op">&amp;</span> <span class="va">num_employee</span> <span class="op">&gt;</span> <span class="fl">0</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">drop_na</span><span class="op">(</span><span class="op">)</span> <span class="co"># それ以外の欠損値をもつ行を削除</span></span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>最後にデータを確認してみます。</p>
<div class="cell">
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span></span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> nikkei_code            name               date           kessan     renketsu 
 Length:25895       Length:25895       Length:25895       10:25895   0:  986  
 Class :character   Class :character   Class :character              1:23815  
 Mode  :character   Mode  :character   Mode  :character              2:   39  
                                                                     3: 1055  
                                                                              
                                                                              
                                                                              
  num_employee     kessan_month   listed_code industry_code  
 Min.   :    12   Min.   : 3.00   11:18782    271704 : 5017  
 1st Qu.:   792   1st Qu.:12.00   12: 6851    245444 : 1375  
 Median :  1566   Median :12.00   13:  262    121210 :  870  
 Mean   :  5602   Mean   :11.98               127262 :  668  
 3rd Qu.:  4358   3rd Qu.:12.00               123225 :  666  
 Max.   :289191   Max.   :16.00               107071 :  612  
                                              (Other):16687  
  total_asset         tangibles           salary           rent_fee       
 Min.   :     231   Min.   :      1   Min.   :      1   Min.   :     0.0  
 1st Qu.:   27830   1st Qu.:   5706   1st Qu.:   1754   1st Qu.:     0.0  
 Median :   65214   Median :  16148   Median :   4012   Median :     0.0  
 Mean   :  341095   Mean   :  97151   Mean   :  15602   Mean   :  1825.2  
 3rd Qu.:  187788   3rd Qu.:  51560   3rd Qu.:  11214   3rd Qu.:   251.5  
 Max.   :82187392   Max.   :7214561   Max.   :1316554   Max.   :444569.0  
                                                                          
 corporate_tax     tax_adjustment         net_income       interest_expense  
 Min.   :-139945   Min.   :-206722.00   Min.   :-2008074   Min.   :    -6.0  
 1st Qu.:    381   1st Qu.:   -145.00   1st Qu.:     569   1st Qu.:    19.0  
 Median :   1107   Median :     -5.00   Median :    1945   Median :    89.0  
 Mean   :   5022   Mean   :    -46.04   Mean   :    9414   Mean   :   988.9  
 3rd Qu.:   3380   3rd Qu.:    139.00   3rd Qu.:    6386   3rd Qu.:   359.0  
 Max.   : 970546   Max.   : 115523.00   Max.   : 1180694   Max.   :117310.0  
                                                                             
     sales         
 Min.   :     228  
 1st Qu.:   27361  
 Median :   64862  
 Mean   :  253626  
 3rd Qu.:  189714  
 Max.   :21571973  
                   </code></pre>
</div>
</div>
<p>これで前処理が終わったので，次は生産性の分析に移っていきます。</p>
</section><section id="生産性の分析" class="level2" data-number="16.1"><h2 data-number="16.1" class="anchored" data-anchor-id="生産性の分析">
<span class="header-section-number">16.1</span> 生産性の分析</h2>
<section id="付加価値とその測定" class="level3" data-number="16.1.1"><h3 data-number="16.1.1" class="anchored" data-anchor-id="付加価値とその測定">
<span class="header-section-number">16.1.1</span> 付加価値とその測定</h3>
<p><strong>付加価値</strong>(added value)とは，企業が新たに生み出した価値であり，<strong>生産性</strong>(productivity)とは付加価値を生み出す能力をいいます。 付加価値は，企業の生産性を測る指標として用いられます。</p>
</section><section id="付加価値の測定" class="level3" data-number="16.1.2"><h3 data-number="16.1.2" class="anchored" data-anchor-id="付加価値の測定">
<span class="header-section-number">16.1.2</span> 付加価値の測定</h3>
<p>付加価値の測定方法には大きく，控除法と<strong>加算法</strong>の2つがあります。</p>
<p>控除法は，売上高から企業が消費した価値の額を引いたものです。 売上高は把握できますが，消費額は外部からは把握できないため，付加価値の測定が難しいです。</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
控除法
</div>
</div>
<div class="callout-body-container callout-body">
<p><span class="math display">
付加価値 = 売上高 - 前段階の企業が生産した価値の消費額
</span></p>
</div>
</div>
<p>そのため，よく利用されるのが加算法です。 企業がつくり出した付加価値は， 従業員に分配した人件費と，借主に支払った賃借料，国・地方自治体に支払った税金，債権者に支払った負債利子の合計に， 企業の当期純利益を加えたものとして，計算されます。</p>
<div class="margin-note">
<p>税金は連結損益計算書の法人税等から法人税調整額を加減したものとして計算します。</p>
</div>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
加算法
</div>
</div>
<div class="callout-body-container callout-body">
<p><span class="math display">
付加価値 = 人件費 + 賃借料 + 税金 + 負債利子 + 当期純利益
</span></p>
</div>
</div>
<p>データの入手可能性から，加算法がよく利用されますが，人件費の特定が困難です。 資格試験では従業員数や給与の情報が与えられるので，そこから計算しますが，ここでは連結損益計算書の販売費及び一般管理費の内訳項目である「人件費・福利厚生費」を人件費として扱います。 <code>dplyr</code>パッケージの<code>mutate()</code>関数で付加価値の変数<code>added_value</code>を計算します。</p>
<div class="cell">
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="va">df</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span></span>
<span>    added_value <span class="op">=</span> <span class="va">salary</span> <span class="op">+</span> <span class="va">rent_fee</span> <span class="op">+</span> <span class="op">(</span><span class="va">corporate_tax</span> <span class="op">+</span> <span class="va">tax_adjustment</span><span class="op">)</span> <span class="op">+</span> <span class="va">interest_expense</span> <span class="op">+</span> <span class="va">net_income</span></span>
<span>  <span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">df</span><span class="op">$</span><span class="va">added_value</span><span class="op">)</span></span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    Min.  1st Qu.   Median     Mean  3rd Qu.     Max. 
-1966993     3406     8211    32806    23898  2321237 </code></pre>
</div>
</div>
<p>付加価値を計算することできたので，付加価値を使った財務分析を行ってみます。</p>
</section><section id="労働生産性の分析" class="level3" data-number="16.1.3"><h3 data-number="16.1.3" class="anchored" data-anchor-id="労働生産性の分析">
<span class="header-section-number">16.1.3</span> 労働生産性の分析</h3>
<p><strong>労働生産性</strong>(labor productivity)とは，一定期間における付加価値を(平均)従業員数で割ったものです。 つまり，従業員一人が1年間に生み出した付加価値の額を示しています。</p>
<p><span class="math display">
労働生産性_t = \frac{付加価値_t}{平均従業員数_t}
</span> 分子が付加価値というフロー情報であることから，分母の従業員数も期首と期末の平均をとることで対応させています。 では，計算してみましょう。 期首と期末の値を使って平均値を計算するため，<code>group_by()</code>関数と<code><a href="https://rdrr.io/r/stats/lag.html">lag()</a></code>関数を使います。</p>
<div class="cell">
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="va">df</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">group_by</span><span class="op">(</span><span class="va">nikkei_code</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="co"># 企業ごとに</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span></span>
<span>    ave_employee <span class="op">=</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/lag.html">lag</a></span><span class="op">(</span><span class="va">num_employee</span><span class="op">)</span> <span class="op">+</span> <span class="va">num_employee</span><span class="op">)</span> <span class="op">/</span> <span class="fl">2</span>, <span class="co"># 平均従業員数</span></span>
<span>    labor_prod <span class="op">=</span> <span class="va">added_value</span> <span class="op">/</span> <span class="va">ave_employee</span> <span class="co"># 労働生産性</span></span>
<span>  <span class="op">)</span></span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>新しく作った変数の記述統計量を確認します。</p>
<div class="cell">
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">df</span><span class="op">$</span><span class="va">ave_employee</span><span class="op">)</span></span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's 
     12     794    1576    5596    4367  285347    2026 </code></pre>
</div>
</div>
<p>最も従業員が少ない会社で12名，最大で約28万名と，従業員数のばらつきが大きいことが分かります。</p>
<div class="cell">
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">df</span><span class="op">$</span><span class="va">labor_prod</span><span class="op">)</span></span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's 
-49.957   2.778   5.257   7.262   9.027 453.811    2026 </code></pre>
</div>
</div>
<p>中央値が<span class="math inline">5.257</span>で平均値が<span class="math inline">7.262</span>と中央値の</p>
<p>ヒストグラムも作成してみます。</p>
<div class="cell">
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span><span class="va">df</span><span class="op">)</span> <span class="op">+</span> <span class="fu">aes</span><span class="op">(</span><span class="va">labor_prod</span><span class="op">)</span> <span class="op">+</span> <span class="fu">geom_histogram</span><span class="op">(</span><span class="op">)</span></span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 2026 rows containing non-finite values (`stat_bin()`).</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="chap15_financialAnalysis_files/figure-html/unnamed-chunk-16-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>分布が右に偏っており，大きな値に異常値がありそうです。</p>
</section><section id="労働生産性の分解" class="level3" data-number="16.1.4"><h3 data-number="16.1.4" class="anchored" data-anchor-id="労働生産性の分解">
<span class="header-section-number">16.1.4</span> 労働生産性の分解</h3>
<p><strong>売上高</strong>を用いた分解：売上高を挟みこむことで，労働生産性を，<strong>一人当たり売上高</strong>と<strong>付加価値率</strong>に分解できる。</p>
<p><span class="math display">
労働生産性 = \frac{付加価値額}{平均従業員数} = \underbrace{\frac{売上高}{平均従業員数}}_{1人当たり売上高} \times \underbrace{\frac{付加価値額}{売上高}}_{付加価値率}
</span></p>
<p><strong>有形固定資産</strong>を用いた分解：有形固定資産を挟み込むことで，労働生産性を<strong>労働装備率</strong>と<strong>設備生産性</strong>に分解できる。</p>
<p><span class="math display">
労働生産性 =\frac{付加価値額}{平均従業員数} = \underbrace{\frac{平均有形固定資産}{平均従業員数}}_{労働装備率} \times \underbrace{\frac{付加価値額}{平均有形固定資産}}_{設備生産性}
</span></p>
</section></section><section id="付加価値の分配" class="level2" data-number="16.2"><h2 data-number="16.2" class="anchored" data-anchor-id="付加価値の分配">
<span class="header-section-number">16.2</span> 3. 付加価値の分配</h2>
<p>付加価値の分配状況をみる。最も大きい分配先は<strong>人件費</strong>であり，<strong>付加価値に占める人件費の割合</strong>を<strong>労働分配率</strong>という。</p>
<p><span class="math display">
一人当たり人件費 = \frac{人件費}{平均従業員数} = \underbrace{\frac{付加価値額}{平均従業員数}}_{労働生産性} \times \underbrace{\frac{人件費}{付加価値額}}_{労働分配率}
</span></p>
<p>一人当たり人件費は，労働生産性と労働分配率に分類できる。</p>
<section id="定義を覚える" class="level3" data-number="16.2.1"><h3 data-number="16.2.1" class="anchored" data-anchor-id="定義を覚える">
<span class="header-section-number">16.2.1</span> 定義を覚える。</h3>
<ul>
<li><span class="math inline">付加価値 = 人件費 + 賃借料 + 税金 + 負債利子 + 当期純利益</span></li>
<li><span class="math inline">労働生産性 = 付加価値額 \div 平均従業員数</span></li>
<li><span class="math inline">付加価値率 = 付加価値額 \div 売上高</span></li>
<li><span class="math inline">労働装備率 = 平均有形固定資産 \div 平均従業員数</span></li>
<li><span class="math inline">設備生産性 = 付加価値額 \div 平均有形固定資産</span></li>
<li><span class="math inline">労働分配率 = 人件費 \div 付加価値額</span></li>
</ul></section><section id="関係を覚える" class="level3" data-number="16.2.2"><h3 data-number="16.2.2" class="anchored" data-anchor-id="関係を覚える">
<span class="header-section-number">16.2.2</span> 関係を覚える</h3>
<ul>
<li><span class="math inline">労働生産性 = 一人当たり売上高 \times 付加価値率</span></li>
<li><span class="math inline">労働生産性 = 労働装備率 \times 設備生産性</span></li>
<li><span class="math inline">一人当たり人件費 =労働生産性 \times 労働分配率</span></li>
</ul></section></section><section id="不確実性の分析" class="level2" data-number="16.3"><h2 data-number="16.3" class="anchored" data-anchor-id="不確実性の分析">
<span class="header-section-number">16.3</span> 不確実性の分析</h2>
<section id="費用構造が利益変動に及ぼす影響" class="level3" data-number="16.3.1"><h3 data-number="16.3.1" class="anchored" data-anchor-id="費用構造が利益変動に及ぼす影響">
<span class="header-section-number">16.3.1</span> 費用構造が利益変動に及ぼす影響</h3>
<p><strong>損益分岐点</strong>(cost-volume-profit)とは，売上と費用が同額となる点をいい，そのときの売上高を損益分岐点売上高という。 損益分岐点を計算するために必要な要素は，</p>
<ul>
<li>収益</li>
<li>変動費</li>
<li>固定費</li>
</ul>
<p>の3つである。</p>
<p>横軸を個数，縦軸を金額とするグラフを考える。 売上高<span class="math inline">S</span>は，生産個数<span class="math inline">X</span>と販売単価<span class="math inline">P</span>の積であるため，<span class="math inline">P \times X</span>となる。 変動費<span class="math inline">V</span>は，操業度や生産個数に応じて変化する費用であり，変動費率<span class="math inline">R</span>と生産個数<span class="math inline">X</span>の積<span class="math inline">R \times X</span>で表す。 ここで，変動費率<span class="math inline">R</span>は，変動費<span class="math inline">V</span>を販売単価<span class="math inline">P</span>で除したものである。 固定費は，操業度にかかわらず一定の費用であり，<span class="math inline">F</span>で表す。 変動費と固定費の合計である総費用<span class="math inline">C</span>は次のように表すことができる。</p>
<p><span class="math display">
C = R \times X + F
</span></p>
<p>損益分岐点は定義より，<span class="math inline">S = C</span> つまり，<span class="math inline">P\times X =  V \times X + F</span> の点となる。よって，</p>
<p><span class="math display">
\begin{aligned}
P\times X &amp;=  R \times X + F\\
(P - R) X &amp;= F\\
X &amp;= \frac{F}{P-R}\\
X &amp;= \frac{F}{1- \frac{V}{P}}
\end{aligned}
</span></p>
<p>となり，損益分岐点売上高が<span class="math inline">F / (1-V)</span> となることが分かる。ここで，<span class="math inline">1-V</span>を<strong>限界利益</strong>という。日本語でかくと，</p>
<p><span class="math display">
損益分岐点売上高= \frac{固定費}{限界利益}
</span></p>
<p>しかし，この計算を行うためには，総費用を変動費と固定費に分ける必要があるが，これは極めて困難である。そこで，簡便的な分類方法がある。</p>
</section><section id="総費用法" class="level3" data-number="16.3.2"><h3 data-number="16.3.2" class="anchored" data-anchor-id="総費用法">
<span class="header-section-number">16.3.2</span> 総費用法</h3>
<p>これは売上高と総費用の2期間比較によって，変動費率を計算する方法である。</p>
<p><span class="math display">
変動費率= \frac{総費用_{t} - 総費用_{t-1}}{売上高_{t} - 売上高_{t-1}}
</span></p>
<p>ここで計算された変動費率を売上高にかけることで，変動費を計算する。</p>
<p><span class="math display">
変動費=変動費率 \times 売上高
</span></p>
</section><section id="最小二乗法" class="level3" data-number="16.3.3"><h3 data-number="16.3.3" class="anchored" data-anchor-id="最小二乗法">
<span class="header-section-number">16.3.3</span> 最小二乗法</h3>
<p>回帰分析手法である最小二乗法を用いて変動費率を計算する方法である。これは比較的データが多く取得可能なときに利用可能だが，年次データともなると，過去5年程度のデータが必要となり，長期間になればなるほど，固定費が変動費となってしまうため，四半期データを用いるなど工夫が必要となる。</p>
<p>総費用を売上高で回帰する。</p>
<p><span class="math display">
Y = a + bX+\varepsilon
</span></p>
<p>総費用<span class="math inline">Y</span> と売上高<span class="math inline">X</span> のデータを用いて，変動費率と解釈できる回帰パラメータ<span class="math inline">b</span> を推定する。最小二乗法の定義より，回帰係数<span class="math inline">b</span> は以下のようになる。</p>
<p><span class="math display">
b = \frac{\mathrm{cov}(Y,X)}{\mathrm{var}(Y)}=\frac{(X_i - \bar X)(Y_i - \bar Y)}{(Y_i - \bar Y)^2}
</span></p>
<p>つまり，売上高と総費用の平均を計算し，各データから平均値を差し引く。総費用の平均偏差の二乗を分母に，分子には売上高と総費用の平均偏差のかけ算を行うことで回帰係数が計算できる。たぶん，試験にはでないだろう。</p>
</section><section id="費目別法" class="level3" data-number="16.3.4"><h3 data-number="16.3.4" class="anchored" data-anchor-id="費目別法">
<span class="header-section-number">16.3.4</span> 費目別法</h3>
<p>費用項目ごとに，何が固定費で何が変動費かを考えて分類する方法である。問題文で条件が指示されれば可能かもしれないが，現実には無理だとおもうので，試験には出ないような気がする。</p>
<p>結論，<strong>総費用法をしっかり覚えておく</strong>。</p>
</section><section id="損益分岐点比率と営業レバレッジ" class="level3" data-number="16.3.5"><h3 data-number="16.3.5" class="anchored" data-anchor-id="損益分岐点比率と営業レバレッジ">
<span class="header-section-number">16.3.5</span> 損益分岐点比率と営業レバレッジ</h3>
<p>実際の売上高と損益分岐点売上高との相対的な規模比較をするための尺度が，損益分岐点比率である。</p>
<p><span class="math display">
損益分岐点比率 = \frac{損益分岐点売上高}{実際の売上高}
</span></p>
<p>実際の売上高と損益分岐点売上高との間の距離のような尺度として安全余裕度がある。</p>
<p><span class="math display">
安全余裕度 = 1 - 損益分岐点比率
</span></p>
<p>安全余裕度が高いほど，売上高が減少しても，まだ損益分岐点売上高まで差があることを意味している。損益分岐点を低くするためには，</p>
<ul>
<li>売上高の増加</li>
<li>変動費率の引き下げ</li>
<li>固定費の削減</li>
</ul>
<p>が必要となる。</p>
<p>売上高の変化が利益の変化に与える影響の度合いを示す尺度に，営業レバレッジがある。</p>
<p><span class="math display">
営業レバレッジ = \frac{営業利益変化率}{売上高変化率} = \frac{1}{1-損益分岐点比率} = \frac{1}{安全余裕度}
</span></p>
<p>となる。この式の導出は，以下のページを参照すること。</p>
<p><a href="https://www.notion.so/27cd3c82559d400a9442361e125cd251?pvs=21">営業レバレッジ</a></p>
<p>ここは，時間がかかりそうなので，何度も問題を解いてパターンになれておくこと。</p>


</section></section></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "コピーしました");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "コピーしました");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
          // default icon
          link.classList.add("external");
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      return note.innerHTML;
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><nav class="page-navigation"><div class="nav-page nav-page-previous">
      <a href="./part04.html" class="pagination-link  aria-label=">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">第4部 財務分析</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer"><div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">
<p>Copyright 2024, Soichi Matsuura</p>
</div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>


</body></html>